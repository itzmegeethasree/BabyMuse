{% extends "core/base.html" %}
{% block content %}
<section class="max-w-md mx-auto py-10">
    <h2 class="text-2xl font-semibold mb-6">🔒 Change Password</h2>

    {% if messages %}
    {% for message in messages %}
    <div class="p-3 rounded text-white
                {% if message.tags == 'success' %}bg-green-600
                {% elif message.tags == 'error' or message.tags == 'danger' %}bg-red-600
                {% else %}bg-gray-500{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}

    <form method="post" class="space-y-4 bg-white p-6 rounded shadow relative">
        {% csrf_token %}

        <input type="password" name="old_password" placeholder="Old Password" class="w-full px-4 py-2 border rounded"
            required />

        <div class="relative">
            <input type="password" name="new_password" id="new_password" placeholder="New Password"
                class="w-full px-4 py-2 border rounded" required />
            <button type="button" onclick="togglePassword('new_password', this)"
                class="absolute right-3 top-2 text-xl text-gray-500">👁</button>
        </div>

        <div class="relative">
            <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm New Password"
                class="w-full px-4 py-2 border rounded" required />
            <button type="button" onclick="togglePassword('confirm_password', this)"
                class="absolute right-3 top-2 text-xl text-gray-500">👁</button>
        </div>

        <button type="submit" class="w-full bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
            Update Password
        </button>
    </form>
</section>

<script>
    function togglePassword(id, btn) {
        const input = document.getElementById(id);
        if (input.type === "password") {
            input.type = "text";
            btn.textContent = "🙈";
        } else {
            input.type = "password";
            btn.textContent = "👁";
        }
    }
</script>
{% endblock %}