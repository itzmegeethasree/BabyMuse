{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<section class="max-w-3xl mx-auto py-10">
    <h1 class="text-3xl font-semibold mb-6">👤 My Profile</h1>

    {% if messages %}
    {% for message in messages %}
    <p class="text-green-600 mb-2">{{ message }}</p>
    {% endfor %}
    {% endif %}

    <div class="bg-white shadow p-6 rounded-xl flex flex-col md:flex-row items-start gap-6">
        <!-- Profile Image -->
        <div class="flex-shrink-0">
            {% if user.profile_image %}
            <img src="{{ user.profile_image.url }}" alt="Profile Image"
                class="w-32 h-32 rounded-full object-cover shadow">
            {% else %}
            <img src="{% static 'images/default_profile.png' %}" alt="Default"
                class="w-32 h-32 rounded-full object-cover shadow">
            {% endif %}
        </div>

        <!-- User Info -->
        <div class="flex-1">
            <p><strong>Full Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Phone:</strong> {{ user.phone }}</p>

            <hr class="my-4">

            <p><strong>Baby Name:</strong> {{ profile.baby_name|default:"-" }}</p>
            <p><strong>Baby DOB:</strong> {{ profile.baby_dob|date:"F j, Y"|default:"-" }}</p>
            <p><strong>Baby Gender:</strong> {{ profile.baby_gender|default:"-" }}</p>

            <div class="mt-6 flex flex-wrap gap-4">
                <a href="{% url 'user:edit_profile' %}"
                    class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Edit Profile</a>
                <a href="{% url 'user:change_password' %}"
                    class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Change Password</a>
                <a href="{% url 'user:address_book' %}"
                    class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Manage Addresses</a>
                <a href="{% url 'orders:order'%}"
                    class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">My
                    Orders</a>
            </div>
        </div>
    </div>

    <!-- Address Overview -->
    <div class="mt-10">
        <h2 class="text-2xl font-semibold mb-4">🏠 Saved Addresses</h2>
        {% if addresses %}
        <div class="grid gap-4">
            {% for address in addresses %}
            <div class="border p-4 rounded-md bg-gray-50">
                <p><strong>{{ address.name }}</strong> {% if address.is_default %}<span
                        class="text-sm text-green-600">(Default)</span>{% endif %}</p>
                <p>{{ address.phone }}</p>
                <p>{{ address.address_line1 }}</p>
                {% if address.address_line2 %}<p>{{ address.address_line2 }}</p>{% endif %}
                <p>{{ address.city }}, {{ address.state }} - {{ address.postal_code }}</p>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="text-gray-500">No addresses saved yet.</p>
        {% endif %}
    </div>
</section>
{% endblock %}